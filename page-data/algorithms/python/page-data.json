{"componentChunkName":"component---src-templates-note-template-tsx","path":"/algorithms/python/","result":{"data":{"markdownRemark":{"html":"<h2>Cartesian Product, Permutations</h2>\n<p><a href=\"https://www.geeksforgeeks.org/python-construct-cartesian-product-tuple-list/\">https://www.geeksforgeeks.org/python-construct-cartesian-product-tuple-list/</a></p>\n<p>example: get all permutations of coords x,y,z for {0,1,2} +- 1</p>\n<pre><code class=\"language-python\">res = [(x, y, z) for x in range(-1,1) for y in range(0,2) for z in range(1,3)]\nprint(res)\n</code></pre>\n<h2>Neighbors</h2>\n<pre><code class=\"language-python\">minX = max(0, x - 1)\nmaxX = min(len(line) - 1, x + 1)\nminY = max(0, y - 1)\nmaxY = min(len(lines) - 1, y + 1)\nneighbors = [\n    (x, y) for x in range(minX, maxX) for y in range(minY, maxY)\n]\n</code></pre>\n<p>get the min/max of coords (tuple)</p>\n<pre><code class=\"language-python\">all_vals = list(graph.weights.keys()) + [graph.start_pos, graph.end_pos]\nxs = list(map(lambda val: val[0], all_vals))\nys = list(map(lambda val: val[1], all_vals))\nmin_xy = (min(xs), min(ys))\nmax_xy = (max(xs), max(ys))\n\n</code></pre>\n<h2>Manhattan Distance</h2>\n<p><a href=\"https://docs.scipy.org/doc/scipy/tutorial/index.html\">https://docs.scipy.org/doc/scipy/tutorial/index.html</a></p>\n<pre><code class=\"language-python\">from scipy.spatial import distance\ndistance.cityblock([1, 0, 0], [0, 1, 0]) # 2\n\ndef manhattan_distance(a: GridLocation, b: GridLocation) -> int:\n    return sum(abs(point1 - point2) for point1, point2 in zip(a, b))\n\nmanhattan_distance((2,18),(-2, 15)) # 7\n</code></pre>\n<h2>Umeyama algorithm</h2>\n<p><a href=\"https://zpl.fi/aligning-point-patterns-with-kabsch-umeyama-algorithm/\">https://zpl.fi/aligning-point-patterns-with-kabsch-umeyama-algorithm/</a></p>\n<pre><code class=\"language-python\">def kabsch_umeyama(A, B):\n    assert A.shape == B.shape\n    n, m = A.shape\n\n    EA = np.mean(A, axis=0)\n    EB = np.mean(B, axis=0)\n    VarA = np.mean(np.linalg.norm(A - EA, axis=1) ** 2)\n\n    H = ((A - EA).T @ (B - EB)) / n\n    U, D, VT = np.linalg.svd(H)\n    d = np.sign(np.linalg.det(U) * np.linalg.det(VT))\n    S = np.diag([1] * (m - 1) + [d])\n\n    R = U @ S @ VT\n    c = VarA / np.trace(np.diag(D) @ S)\n    t = EA - c * R @ EB\n\n    return R, c, t\n\nA = np.array([[ 23, 178],\n              [ 66, 173],\n              [ 88, 187],\n              [119, 202],\n              [122, 229],\n              [170, 232],\n              [179, 199]])\nB = np.array([[232, 38],\n              [208, 32],\n              [181, 31],\n              [155, 45],\n              [142, 33],\n              [121, 59],\n              [139, 69]])\n\nR, c, t = kabsch_umeyama(A, B)\n# R = [[-0.81034281,  0.58595608]\n#      [-0.58595608, -0.81034281]]\n# c = 1.46166131\n# t = [271.3345951, 396.07800317]\n\nB = np.array([t + c * R @ b for b in B])\n# B = [[ 29.08878779, 152.36814188]\n#      [ 52.37669337, 180.03008629]\n#      [ 83.50028582, 204.33920503]\n#      [126.28647155, 210.02515345]\n#      [131.40664707, 235.37261559]\n#      [178.54823113, 222.56285654]\n#      [165.79288328, 195.30194121]]\n</code></pre>\n<p><a href=\"https://colab.research.google.com/drive/1QmLL-0_FofDoJgtbCVlGdSZUxZA-K6ho?usp=sharing\">Colab preview</a></p>\n<h2>Linear Algebra, Machine Learning</h2>\n<h3>NumPy</h3>\n<p><a href=\"https://numpy.org/doc/stable/user/absolute_beginners.html\">https://numpy.org/doc/stable/user/absolute_beginners.html</a> - getting started</p>\n<p><a href=\"https://www.educba.com/matrix-multiplication-in-numpy/\">https://www.educba.com/matrix-multiplication-in-numpy/</a> - detailed explanations of functions</p>\n<p><a href=\"https://www.tutorialexample.com/understand-numpy-np-multiply-np-dot-and-operation-a-beginner-guide-numpy-tutorial/\">https://www.tutorialexample.com/understand-numpy-np-multiply-np-dot-and-operation-a-beginner-guide-numpy-tutorial/</a> - explains diff between dot, multiply and *</p>\n<h2>Raycasting</h2>\n<p>Find whether a point is inside or outside a polygon. Odd number of inversions is inside, even is outside.</p>\n<p><a href=\"http://philliplemons.com/posts/ray-casting-algorithm\">http://philliplemons.com/posts/ray-casting-algorithm</a></p>\n<pre><code class=\"language-python\"># http://philliplemons.com/posts/ray-casting-algorithm\n# https://www.youtube.com/watch?v=zhmzPQwgPg0\n# has edge cases\ndef count_inversions(visited: set[Coord], line: str, x: int, y: int) -> int:\n    count = 0\n    for idx in range(x):\n        if not (idx, y) in visited:\n            continue\n\n        count += line[idx] in {CharMap.PIPE.value, CharMap.EL.value, CharMap.JAY.value}\n\n    return count\n</code></pre>\n<h2>Finding Cycles</h2>\n<p>Endless/large loops can be shortcut by finding 'cycles' or repeating patterns and using math.</p>\n<h3>example with offset (pattern starts after offset)</h3>\n<p>set is used to speed up lookups, tuple is required to use it. (<a href=\"https://www.youtube.com/watch?v=WCVOBKUNc38\">https://www.youtube.com/watch?v=WCVOBKUNc38</a>)</p>\n<pre><code class=\"language-python\">def part_2(data: InputData) -> int:\n    data = tuple(data)\n    seen = {data}\n    cycles = [data]\n\n    iteration = 0\n    while True:\n        iteration += 1\n        data = spin_cycle(data)\n        if data in seen:\n            break\n\n        seen.add(data)\n        cycles.append(data)\n\n    first = cycles.index(data)\n    cycle_grid_index = (1000000000 - first) % (iteration - first) + first\n    data = cycles[cycle_grid_index]\n\n    return calculate_load(list(data))\n</code></pre>\n<h2>rotating lists</h2>\n<p><a href=\"https://github.com/terminalmage/adventofcode/blob/main/2022/day20.py\">https://github.com/terminalmage/adventofcode/blob/main/2022/day20.py</a></p>\n<p>Take a list of numbers and move the original values + or - the amount of the value.</p>\n<pre><code class=\"language-python\">from random import randrange\nfrom collections import deque\n\ndata = [x * randrange(-10, 10) for x in range(10)]\n# [0, 9, -12, -21, 16, 10, -36, -56, -16, 27]\n\noriginal_order = list(enumerate(int(x) * 1 for x in data))\n# [(0, 0), (1, 9), (2, -12), (3, -21), (4, 16), (5, 10), (6, -36), (7, -56), (8, -16), (9, 27)]\nsorted_list = deque(original_order, maxlen=len(data))\nfor val in original_order:\n    # Rotate until we get to the location of this value\n    sorted_list.rotate(-sorted_list.index(val))\n    # deque([(0, 0), (1, 9), (2, -12), (3, -21), (4, 16), (5, 10), (6, -36), (7, -56), (8, -16), (9, 27)], maxlen=10)\n\n    # Pop the value off the list, and then rotate again by that\n    # amount to point the front of the queue at the location where\n    # we need to move it\n    sorted_list.rotate(-sorted_list.popleft()[1])\n    # deque([(1, 9), (2, -12), (3, -21), (4, 16), (5, 10), (6, -36), (7, -56), (8, -16), (9, 27)], maxlen=10)\n\n    # Place the the value in its new location\n    sorted_list.appendleft(val)\n    # deque([(0, 0), (1, 9), (2, -12), (3, -21), (4, 16), (5, 10), (6, -36), (7, -56), (8, -16), (9, 27)], maxlen=10)\n\n# deque([(9, 27), (4, 16), (0, 0), (1, 9), (7, -56), (6, -36), (5, 10), (2, -12), (3, -21), (8, -16)], maxlen=10)\n</code></pre>\n<h2>Graphs</h2>\n<p><a href=\"https://garba.org/posts/2022/graph/\">Practical Graph Theory using Networkx</a></p>\n<h3>Cuts</h3>\n<p>Identify the x(3) places to cut and split graphs.</p>\n<ul>\n<li><a href=\"https://networkx.org/documentation/stable/reference/algorithms/cuts.html\">https://networkx.org/documentation/stable/reference/algorithms/cuts.html</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Cut_%28graph_theory%29\">https://en.wikipedia.org/wiki/Cut_%28graph_theory%29</a></li>\n</ul>\n<p>Visualizing</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/201e0e4e59e81231dbe468e223ddf6d5/5c263/networkx-graph.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.03067484662577%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVR42pWTzytEURTHz/vBbJSFhUlmw0JRNhZkQVkQGxb+AsPGWo1kYTspJVKysCMLUiNKszKTjTJNXkYpv6bZKMUMhjfv3q9733vzDEPGqdM7nd75nns/51yCZxycczdmwk07918jT84VSyYXsLzcjXC4E5ubg0gkZlEo5LymFQjKk8kwh729UbS0EFRVgaYpqKkhTE3VwjQv3absb0HGCnZwdbWEnh4CkY7qahW6Ll3B8LAPLy/JygU5t+zg4WFfFEtBRZxQE18N9fUkrt6MbPbYFSy4rBlknVPLy6/smAXDWEQo1ISuLkJvL2F6ug6RSANOTsZsLMXmpSbZl+apdMqOveIiNYd0eg2MZXB7uypwbCOXk1h2cX8fRSazg3g8hFhsEs/P519w0NduFnjZIJ3E4+MdDg46sLHhR1+fDz4fwe8nzMy04vpaNn8rF/wUZu4ucpebAGLlcXo6gqGhKpuzrutQFOmEYFDB+/vl74LfjTGHkWGE0dbmbIKmqmK15PAI48Eq5POJygWLfNLpLayvt6O/n9AYUBAIqBgYIESjE96AqPJH5bA0zRs8PR0ilVqBcTYv4iMwK+v9Q/95p86K8B/zxbX5AH1hf2tlMuLVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Visualizing Cuts\"\n        title=\"\"\n        src=\"/notes/static/201e0e4e59e81231dbe468e223ddf6d5/a6d36/networkx-graph.png\"\n        srcset=\"/notes/static/201e0e4e59e81231dbe468e223ddf6d5/222b7/networkx-graph.png 163w,\n/notes/static/201e0e4e59e81231dbe468e223ddf6d5/ff46a/networkx-graph.png 325w,\n/notes/static/201e0e4e59e81231dbe468e223ddf6d5/a6d36/networkx-graph.png 650w,\n/notes/static/201e0e4e59e81231dbe468e223ddf6d5/e548f/networkx-graph.png 975w,\n/notes/static/201e0e4e59e81231dbe468e223ddf6d5/3c492/networkx-graph.png 1300w,\n/notes/static/201e0e4e59e81231dbe468e223ddf6d5/5c263/networkx-graph.png 1636w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Cutting <code>fri -- thx</code>, <code>ccp -- fvm</code>, and <code>llm -- lhg</code> would create two separate graphs.</p>\n<pre><code class=\"language-python\">import networkx as nx\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nInputData = dict[str, set[str]]\n\ndata = {'jqt': {'nvd', 'ntq', 'xhk', 'rhn'}, 'nvd': {'jqt', 'pzl', 'cmg', 'lhk', 'qnr'}, 'xhk': {'jqt', 'rhn', 'bvb', 'ntq', 'hfx'}, 'rhn': {'bvb', 'jqt', 'hfx', 'xhk'}, 'rsh': {'frs', 'rzs', 'lsr', 'pzl'}, 'frs': {'lhk', 'qnr', 'lsr', 'rsh'}, 'lsr': {'rzs', 'pzl', 'rsh', 'frs', 'lhk'}, 'pzl': {'nvd', 'hfx', 'lsr', 'rsh'}, 'hfx': {'pzl', 'rhn', 'bvb', 'ntq', 'xhk'}, 'cmg': {'rzs', 'nvd', 'bvb', 'lhk', 'qnr'}, 'lhk': {'nvd', 'frs', 'cmg', 'lsr'}, 'bvb': {'rhn', 'cmg', 'ntq', 'hfx', 'xhk'}, 'qnr': {'nvd', 'frs', 'rzs', 'cmg'}, 'ntq': {'bvb', 'jqt', 'hfx', 'xhk'}, 'rzs': {'lsr', 'cmg', 'qnr', 'rsh'}}\n\nvertices = []\nedges = []\n\nfor k, vals in data.items():\n    vertices.append(k)\n    for v in vals:\n        edges.append((k, v))\n\nG = nx.Graph()\nG.add_nodes_from(vertices)\nG.add_edges_from(edges)\nplt.subplot()\nnx.draw(G, with_labels=True, node_color=\"y\", node_size=800)\n\ncuts = nx.minimum_edge_cut(G)\nfor cut in cuts:\n    G.remove_edge(*cut)\n\n# print(max(nx.connected_components(G), key=len))\nsubgraphs = [G.subgraph(c).copy() for c in nx.connected_components(G)]\ncounts = [len(s) for s in subgraphs]\n\n</code></pre>","frontmatter":{"date":"April 11, 2021","title":"Python","tags":null}}},"pageContext":{"slug":"/algorithms/python/"}},"staticQueryHashes":["1796642556","2356112386","3489759178"],"slicesMap":{}}