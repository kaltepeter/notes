{"componentChunkName":"component---src-templates-note-template-tsx","path":"/react/testing/","result":{"data":{"markdownRemark":{"html":"<h2>Child Component Props</h2>\n<ul>\n<li>Child component is already tested</li>\n<li>Need to validate correct props</li>\n<li>Settings would likely be a custom hook and validating that it loaded</li>\n</ul>\n<p>Based off of: <a href=\"https://x.com/kentcdodds/status/1189662486007468032\">https://x.com/kentcdodds/status/1189662486007468032</a></p>\n<p>component</p>\n<pre><code class=\"language-javascript\">// settings: {enabled: true}\nexport const MyComponent = ({ settings }) => {\n  const [settings, setSettings] = useState({enabled: true}) \n  return &#x3C;>\n    &#x3C;div>example text&#x3C;/div>\n    &#x3C;MyChildComponent settings={settings} />\n  &#x3C;/>;\n};\n</code></pre>\n<p>test</p>\n<pre><code class=\"language-javascript\">import { MyChildComponent } from \"./MyChildComponent\";\n\njest.mock(\"./MyChildComponent\");\n\ntest(\"should load settings\", async () => {\nrenderWithProviders(&#x3C;MyComponent />);\n\nexpect(MyChildComponent).toHaveBeenCalledWith(\n    {\n    settings: {enabled: true},\n    },\n    {}, // context\n);\n});\n</code></pre>\n<h2>Async useEffect</h2>\n<ul>\n<li>Async useEffect can cause an Act warning in tests.</li>\n<li>See <a href=\"https://github.com/testing-library/react-testing-library/issues/667#issuecomment-628273598\">https://github.com/testing-library/react-testing-library/issues/667#issuecomment-628273598</a> for solution/answers</li>\n</ul>\n<pre><code class=\"language-javascript\">test(`default settings`, async () => {\n    renderWithProviders(\n    &#x3C;MyComponent />,\n    );\n\n    const divElem = await screen.findByText('example text'); // getByText will throw Act warning if there is async in a useEffect\n\n    expect(divElem).toBeTruthy();\n\n    // tests without an asnyc function could wrap the renderWithProviders\n    // await act(async () => {\n    //     await renderWithProviders(&#x3C;MyComponent />);\n    // });\n});\n</code></pre>","frontmatter":{"date":"October 13, 2024","title":"React: Testing","tags":["framework","ui","testing"]}}},"pageContext":{"slug":"/react/testing/"}},"staticQueryHashes":["1796642556","2356112386","3489759178"],"slicesMap":{}}